<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Events Created - EventPro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        .sidebar-active {
            background-color: rgb(239 246 255);
            color: rgb(37 99 235);
            border-right: 2px solid rgb(37 99 235);
        }
    </style>
</head>
<body class="bg-gray-50">
    <div class="flex h-screen">
        <!-- Navigation -->
        <div class="w-64 bg-white shadow-sm border-r border-gray-100 h-full">
            <!-- Logo -->
            <div class="p-6 border-b border-gray-100">
                <div class="flex items-center space-x-2">
                    <div class="w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center">
                        <i data-lucide="calendar" class="w-5 h-5 text-white"></i>
                    </div>
                    <span class="text-xl font-bold text-gray-800">EventPro</span>
                </div>
            </div>

            <!-- Menu Items -->
            <nav class="mt-6">
                <ul class="space-y-1 px-3">
                    <li>
                        <a href="dashboard.html" class="sidebar-link w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-left transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900">
                            <i data-lucide="home" class="w-5 h-5"></i>
                            <span class="font-medium">Home</span>
                        </a>
                    </li>
                    <li>
                        <a href="events.html" class="sidebar-link w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-left transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900">
                            <i data-lucide="calendar" class="w-5 h-5"></i>
                            <span class="font-medium">Events</span>
                        </a>
                    </li>
                    <li>
                        <a href="analytics.html" class="sidebar-link w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-left transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900">
                            <i data-lucide="bar-chart-2" class="w-5 h-5"></i>
                            <span class="font-medium">Analytics</span>
                        </a>
                    </li>
                    <li>
                        <a href="feedback.html" class="sidebar-link w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-left transition-colors text-gray-600 hover:bg-gray-50 hover:text-gray-900">
                            <i data-lucide="message-circle" class="w-5 h-5"></i>
                            <span class="font-medium">Feedback</span>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>

        <div class="flex-1 p-6">
            <h1 class="text-2xl font-semibold text-gray-800 mb-6">Events Created</h1>
<!-- Events Overview Stats -->
<div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
    <div class="bg-white rounded-xl shadow-sm border border-gray-100 p-6">
        <div class="flex items-center justify-between">
            <div>
                <p class="text-sm font-medium text-gray-600">Total Events</p>
                <p class="text-2xl font-bold text-gray-900 mt-1" id="total-events">0</p>
                <p class="text-green-600 text-sm mt-1">All time</p>
            </div>
            <div class="p-3 rounded-lg bg-blue-50">
                <i data-lucide="calendar" class="w-6 h-6 text-blue-600"></i>
            </div>
        </div>
    </div>

    <div class="bg-white rounded-xl shadow-sm border border-gray-100 p-6">
        <div class="flex items-center justify-between">
            <div>
                <p class="text-sm font-medium text-gray-600">Live Events</p>
                <p class="text-2xl font-bold text-gray-900 mt-1" id="live-events">0</p>
                <p class="text-green-600 text-sm mt-1">ðŸ”´ Active now</p>
            </div>
            <div class="p-3 rounded-lg bg-green-50">
                <i data-lucide="activity" class="w-6 h-6 text-green-600"></i>
            </div>
        </div>
    </div>

    <div class="bg-white rounded-xl shadow-sm border border-gray-100 p-6">
        <div class="flex items-center justify-between">
            <div>
                <p class="text-sm font-medium text-gray-600">Completed Events</p>
                <p class="text-2xl font-bold text-gray-900 mt-1" id="completed-events">0</p>
                <p class="text-blue-600 text-sm mt-1">Finished</p>
            </div>
            <div class="p-3 rounded-lg bg-purple-50">
                <i data-lucide="check-circle" class="w-6 h-6 text-purple-600"></i>
            </div>
        </div>
    </div>

    <div class="bg-white rounded-xl shadow-sm border border-gray-100 p-6">
        <div class="flex items-center justify-between">
            <div>
                <p class="text-sm font-medium text-gray-600">Total Attendees</p>
                <p class="text-2xl font-bold text-gray-900 mt-1" id="total-attendees">0</p>
                <p class="text-orange-600 text-sm mt-1">Across all events</p>
            </div>
            <div class="p-3 rounded-lg bg-orange-50">
                <i data-lucide="users" class="w-6 h-6 text-orange-600"></i>
            </div>
        </div>
    </div>
</div>

<!-- Create New Event Button -->
<div class="flex justify-between items-center mb-6">
    <h2 class="text-xl font-semibold text-gray-900">Your Events</h2>
    <a href="create-event.html" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors">
        <i data-lucide="plus" class="w-4 h-4"></i>
        <span>Create New Event</span>
    </a>
</div>

<!-- Events Grid -->
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="events-grid">
    <!-- Events will be populated here -->
</div>

<!-- Empty State (shown when no events) -->
<div id="empty-state" class="text-center py-12 hidden">
    <div class="w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4">
        <i data-lucide="calendar-plus" class="w-12 h-12 text-gray-400"></i>
    </div>
    <h3 class="text-xl font-semibold text-gray-900 mb-2">No Events Created Yet</h3>
    <p class="text-gray-600 mb-6 max-w-md mx-auto">
        Get started by creating your first event. You'll be able to track analytics, engagement, and gather feedback.
    </p>
    <a href="create-event.html" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg inline-flex items-center space-x-2 transition-colors">
        <i data-lucide="plus" class="w-5 h-5"></i>
        <span>Create Your First Event</span>
    </a>
</div>
<script>
    let allEvents = [];

    // Load events data
    async function loadEvents() {
        try {
            // Mock data instead of API call
            const data = {
                events: [
                    {
                        id: 1,
                        title: "Tech Conference 2024",
                        description: "Annual technology conference featuring industry leaders",
                        date: "2024-03-15",
                        time: "09:00 AM",
                        location: "Convention Center",
                        capacity: 500,
                        attendees: 245,
                        ticketPrice: 25000,
                        status: "live"
                    },
                    {
                        id: 2,
                        title: "Marketing Summit",
                        description: "Digital marketing strategies for 2024",
                        date: "2024-04-01",
                        time: "10:00 AM",
                        location: "Hotel Grand",
                        capacity: 300,
                        attendees: 180,
                        ticketPrice: 15000,
                        status: "upcoming"
                    },
                    {
                        id: 3,
                        title: "Design Workshop",
                        description: "Hands-on UI/UX design workshop",
                        date: "2024-02-01",
                        time: "02:00 PM",
                        location: "Design Studio",
                        capacity: 50,
                        attendees: 50,
                        ticketPrice: 10000,
                        status: "completed"
                    }
                ]
            };
            allEvents = data.events || [];
            
            updateStats();
            displayEvents();
            
        } catch (error) {
            console.error('Error loading events:', error);
        }
    }

    function updateStats() {
        const totalEvents = allEvents.length;
        const liveEvents = allEvents.filter(e => e.status === 'live').length;
        const completedEvents = allEvents.filter(e => e.status === 'completed').length;
        const totalAttendees = allEvents.reduce((sum, e) => sum + (e.attendees || 0), 0);

        document.getElementById('total-events').textContent = totalEvents;
        document.getElementById('live-events').textContent = liveEvents;
        document.getElementById('completed-events').textContent = completedEvents;
        document.getElementById('total-attendees').textContent = totalAttendees.toLocaleString();
    }

    function displayEvents() {
        const eventsGrid = document.getElementById('events-grid');
        const emptyState = document.getElementById('empty-state');

        if (allEvents.length === 0) {
            eventsGrid.classList.add('hidden');
            emptyState.classList.remove('hidden');
            return;
        }

        eventsGrid.classList.remove('hidden');
        emptyState.classList.add('hidden');
        eventsGrid.innerHTML = '';

        allEvents.forEach(event => {
            const eventCard = createEventCard(event);
            eventsGrid.appendChild(eventCard);
        });
    }

    function createEventCard(event) {
        const card = document.createElement('div');
        card.className = 'bg-white rounded-xl shadow-sm border border-gray-100 p-6 hover:shadow-md transition-shadow cursor-pointer';
        
        const statusColors = {
            'live': 'bg-green-100 text-green-800',
            'completed': 'bg-blue-100 text-blue-800',
            'upcoming': 'bg-yellow-100 text-yellow-800'
        };

        const statusColor = statusColors[event.status] || statusColors['upcoming'];

        card.innerHTML = `
            <div class="flex items-start justify-between mb-4">
                <div class="flex-1">
                    <h3 class="text-lg font-semibold text-gray-900 mb-2">${event.title}</h3>
                    <p class="text-gray-600 text-sm mb-3 line-clamp-2">${event.description || 'No description available'}</p>
                </div>
                <span class="px-2 py-1 rounded-full text-xs font-medium ${statusColor} ml-2">
                    ${event.status}
                </span>
            </div>
            
            <div class="space-y-2 mb-4">
                <div class="flex items-center text-sm text-gray-600">
                    <i data-lucide="calendar" class="w-4 h-4 mr-2"></i>
                    <span>${event.date} at ${event.time}</span>
                </div>
                <div class="flex items-center text-sm text-gray-600">
                    <i data-lucide="map-pin" class="w-4 h-4 mr-2"></i>
                    <span>${event.location}</span>
                </div>
                <div class="flex items-center text-sm text-gray-600">
                    <i data-lucide="users" class="w-4 h-4 mr-2"></i>
                    <span>${event.attendees || 0} / ${event.capacity} attendees</span>
                </div>
                <div class="flex items-center text-sm text-gray-600">
                    <i data-lucide="dollar-sign" class="w-4 h-4 mr-2"></i>
                    <span>${event.ticketPrice == 0 ? 'Free' : 'IDR ' + event.ticketPrice.toLocaleString()}</span>
                </div>
            </div>
            
            <div class="flex space-x-2">
                <button onclick="viewAnalytics(${event.id})" class="flex-1 bg-blue-600 hover:bg-blue-700 text-white px-3 py-2 rounded-lg text-sm font-medium transition-colors">
                    View Analytics
                </button>
                <button onclick="editEvent(${event.id})" class="px-3 py-2 border border-gray-200 text-gray-600 rounded-lg hover:bg-gray-50 transition-colors">
                    <i data-lucide="edit" class="w-4 h-4"></i>
                </button>
                <button onclick="deleteEvent(${event.id})" class="px-3 py-2 border border-gray-200 text-red-600 rounded-lg hover:bg-red-50 transition-colors">
                    <i data-lucide="trash-2" class="w-4 h-4"></i>
                </button>
            </div>
        `;

        return card;
    }

    function viewAnalytics(eventId) {
        // Find the event
        const event = allEvents.find(e => e.id === eventId);
        if (event && event.status === 'completed') {
            // Redirect to post-event analytics for completed events
            window.location.href = `event_post_analytics.html?id=${eventId}`;
        } else {
            // Redirect to pre-event analytics for other events
            window.location.href = `event_pre_analytics.html?id=${eventId}`;
        }
    }

    function editEvent(eventId) {
        // For now, just show alert. In production, redirect to edit page
        alert(`Edit event ${eventId} - Feature coming soon!`);
    }

    function deleteEvent(eventId) {
        if (confirm('Are you sure you want to delete this event? This action cannot be undone.')) {
            // Filter out the deleted event
            allEvents = allEvents.filter(e => e.id !== eventId);
            updateStats();
            displayEvents();
            
            // In production, make API call to delete event
            alert('Event deleted successfully!');
        }
    }

    // Load data when page loads
    document.addEventListener('DOMContentLoaded', function() {
        loadEvents();
        // Re-initialize Lucide icons after DOM manipulation
        setTimeout(() => lucide.createIcons(), 100);
    });
</script>
    </script>
</body>
</html>